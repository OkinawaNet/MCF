Схема v3.0.0
======

Стейкхолдеры
------

![Стейкхолдеры](images/hw_3/SH.jpg)

Матрица влияние-интерес
------

![Матрица влияние-интерес](images/hw_3/SH_IM.jpg)

Консёрны
------

![Консёрны](images/hw_3/Concerns.png)

Ограничения
------

- инфраструктуру считаем бесплатной
- соблюдение CatFinComplience, который говорит об особом способе хранения данных и особой наблюдаемости за системой. Компания не хочет повторять опыт с маски-шоу, которые были в Happy Cat Box.

Характеристики
------

| Характеристики | Источник |
|------------|------------|
| scalebility, securebility | [US-081] Мы ожидаем 1к заявок в день от рандомных котов, также, судя по отзывам, наши конкуренты могут попытаться нас заддосить в этом месте. Они так делали уже несколько раз с другими компаниями, после чего компании закрывались с позором. |
| agility, testability, deployability | Низкий ТТМ |
| modifiability, testability, deployability | Для бизнеса критично проверять новые гипотезы по отсеву котов и изменять уже существующие с максимальной скоростью и надёжностью.|
| agility, testability, deployability, scalability, availability, fault tolerance | Конкурентное преимущество (найм + матчинг) |
| availability, continuity, reliability, еxtensibility, modifiability, maintainability, supportability, readability, accessibility, security, usability | 2 core-поддомена (найм + матчинг) являются конкурентным преимуществом |
| maintainability, readability, supportability | 3 supporting-поддомена |
| maintainability, reliability | Общий консёрн админов и разрабов |
| deployability | Консёрн топ-менеджеров |
| Consistency | Хранение данных о фин. операциях |

![Характеристики](https://raw.githubusercontent.com/OkinawaNet/MCF/main/images/hw_3/BC_chars.png)


Выбор архитектуры
------

agility, deployability и testability исключают монолит. Определим, из каких сервисов будет состоять система.

### 1 Выплаты воркерам

Есть ограничение на соблюдение CatFinComplience. Придется делать отдельным сервисом.

### 2 Оплата заказов

Есть ограничение на соблюдение CatFinComplience. Логика хотя и выглядит сходно с сервисом выплат воркерам, процесс другой и не стоит сливать с ним. Придется делать отдельным сервисом.

### 3 Найм воркеров

Релизный цикл, согласно требованию топ-менеджеров - 1 неделя, против месячного цикла у других конекстов. Придется вынести в отдельный сервис.

### 4 Тотализатор

Тотализатор должен быть максимально скрыт, значит отдельынй сервис.

### 5 Матчинг воркеров

Core - поддомен. Должны быть availability, continuity, reliability, еxtensibility, modifiability, maintainability, supportability, readability, accessibility, security, usability, чего нет в оставшихся поддоменах.

Конкурентное преимущество. Следовательно, вероятнее всего, будет собственный релизный цикл, несмотря на то, что сейчас он общий для всех, кроме найма.
Выносим в отдельный сервис.

### 6 Управление заказами и контроль качества

Можно объединить с оставшимся контекстом "контроль качества", но:
- Это другой поддомен
- Разный Scalability

Поэтому выносим в отдельные сервисы.

Выбор стилей сервисов
------

### 1 Матчинг воркеров

Разработчики пишут: [US-300] Алгоритм матчинга — общий для любых образцов, состоит из набора шагов, по которым рассчитываются рейтинги и другие значения. Система чем-то похожа на map-reduce. Разработчики решили, что они сами будут реализовывать всю логику на любом языке, так как они не хотят делиться алгоритмом. Наша цель — использовать реализованные шаги в нужной нам последовательности, которая иногда может изменяться, при этом необходимо иметь возможность добавлять или редактировать шаги, как нам это необходимо.

Наиболее подходящий стиль в данном случае - Pipeline.

### 2 Найм воркеров

Могут быть очень разные тесты. Удобно будет реализовать как Microkernel.

### 3 Управление заказами

Модульный монолит для реализации разных эндпойнтов под оформление заказа, сборку и т.д.

### 4 Выплаты воркерам, Оплата заказов, контроль качества, Тотализатор

Под эти сервисы сгодится layered монолит.